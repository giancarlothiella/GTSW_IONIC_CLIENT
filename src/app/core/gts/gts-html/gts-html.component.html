@if (showHtmlEditor) {
  <dx-toolbar
    class="html-toolbar"
    [items]="editToolbarList"
    [visible]="showHtmlEditor"
  ></dx-toolbar>
}

@if (showMMTags) {
  <div class="fields">
    <div style="height: 35px; padding-top: 5px;">
      <span>Fields List</span>
    </div>
    <dx-data-grid
      [repaintChangesOnly]="true"
      [width]="250"
      [visible]="true"
      [dataSource]="fieldsDataSource"
      [showBorders]="true"
      [columnAutoWidth]="true"
      [showRowLines]="true"
      [showColumnLines]="true"
      [rowAlternationEnabled]="true"
      (onRowDblClick)="onRowDblClick($event)"
      (onRowInserted)="onRowChanged($event)"
      (onRowRemoved)="onRowChanged($event)"
      ><dxo-editing
      mode="row"
      [allowAdding]="true"
      [allowDeleting]="true"
      [allowUpdating]="false"
    ></dxo-editing>
  </dx-data-grid>
</div>
}

<dx-tabs
  id="languages"
  [width]="800"
  [dataSource] = "languageTabsDataSource"
  iconPosition = "start"
  stylingMode = "secondary"
  [selectedIndex]="languageIndex"
  [(tabIndex)]="languageIndex"
  (onItemClick)="onLanguageTabClick($event)"
  (onInitialized)="onLanguageTabsInitialized($event)"
></dx-tabs>

<div class="languageData">
  <div class="addData">
    <dx-color-box
      class="addDataInput"
      [(value)]="colorValue"
      [readOnly]="!showMMTags"
      labelMode="static"
      label="Table title background"
      [width]="200"
      [editAlphaChannel]="false"
      (onValueChanged)="onColorValueChanged($event)"
    ></dx-color-box>

    <dx-text-box
      class="addDataInput"
      [(value)]="rowHeight"
      [readOnly]="!showMMTags"
      labelMode="static"
      label="Row height"
      [width]="100"
      (onValueChanged)="onRowHeightChanged($event)"
    ></dx-text-box>
  </div>

  @if (showHtmlEditor) {
    <dx-html-editor
      [height]="725"
      [width]="800"
      [readOnly]="!showMMTags"
      [(value)]="valueContent"
      (onValueChanged)="onHtmlValueChanged($event)"
      (onInitialized)="onHtmlEditorInitialized($event)"
      >
      <dxo-table-resizing [enabled]="true"></dxo-table-resizing>
      <dxo-toolbar
        [multiline]="false"
        >
        <dxi-item name="undo"></dxi-item>
        <dxi-item name="redo"></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item
          name="size"
          [acceptedValues]="['8pt', '10pt', '12pt', '14pt', '18pt', '24pt', '36pt']"
          [options]="{ inputAttr: { 'aria-label': 'Font size' } }"
        ></dxi-item>
        <dxi-item
          name="font"
        [acceptedValues]="[
          'Arial',
          'Courier New',
          'Georgia',
          'Impact',
          'Lucida Console',
          'Tahoma',
          'Times New Roman',
          'Verdana'
        ]"
          [options]="{ inputAttr: { 'aria-label': 'Font family' } }"
        ></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item name="bold"></dxi-item>
        <dxi-item name="italic"></dxi-item>
        <dxi-item name="strike"></dxi-item>
        <dxi-item name="underline"></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item name="alignLeft"></dxi-item>
        <dxi-item name="alignCenter"></dxi-item>
        <dxi-item name="alignRight"></dxi-item>
        <dxi-item name="alignJustify"></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item name="orderedList"></dxi-item>
        <dxi-item name="bulletList"></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item
          name="header"
          [acceptedValues]="[false, 1, 2, 3, 4, 5]"
          [options]="{ inputAttr: { 'aria-label': 'Header' } }"
        ></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item name="color"></dxi-item>
        <dxi-item name="background"></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item name="link"></dxi-item>
        <dxi-item name="image"></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item name="clear"></dxi-item>
        <dxi-item name="codeBlock"></dxi-item>
        <dxi-item name="blockquote"></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item name="insertTable"></dxi-item>
        <dxi-item name="deleteTable"></dxi-item>
        <dxi-item name="insertRowAbove"></dxi-item>
        <dxi-item name="insertRowBelow"></dxi-item>
        <dxi-item name="deleteRow"></dxi-item>
        <dxi-item name="insertColumnLeft"></dxi-item>
        <dxi-item name="insertColumnRight"></dxi-item>
        <dxi-item name="deleteColumn"></dxi-item>
      </dxo-toolbar>
      <dxo-media-resizing
        [enabled]="true"
      ></dxo-media-resizing>
    </dx-html-editor>
  }
</div>


<dx-popup
  [hideOnOutsideClick]="false"
  [showCloseButton]="false"
  [(visible)]="testDataVisible"
  title="Test Data Object"
  [height]="570"
  [width]="500"
  >
  <dx-text-area
    [(value)]="testDataString"
    height="460"
  ></dx-text-area>

  <dx-button
    class="saveButton"
    text="Save"
    type="success"
    [width]="100"

    (onClick)="onSaveTestData()"
  ></dx-button>

  <dx-button
    class="saveButton"
    text="Cancel"
    type="danger"
    [width]="100"

    (onClick)="onCancelTestData()"
  ></dx-button>
</dx-popup>

<dx-popup
  [hideOnOutsideClick]="true"
  [showCloseButton]="false"
  [(visible)]="resultDataVisible"
  title="Preview MailMerge result"
  [height]="800"
  [width]="800"
  >
  @if (showHtmlEditor) {
    <dx-html-editor
      [readOnly]="true"
      [height]="724"
      [width]="768"
      [value]="testValueContent"
    ></dx-html-editor>
  }
</dx-popup>

<dx-popup
  [hideOnOutsideClick]="true"
  [showCloseButton]="false"
  [(visible)]="languagesVisible"
  title="Languages"
  [height]="languagesPopupHeight"
  [width]="400"
  >
  <dx-toolbar
    class="language-toolbar"
    [items]="languageToolbarList"
    [visible]="true"
  ></dx-toolbar>

  <dx-data-grid
    [repaintChangesOnly]="true"
    [visible]="true"
    [dataSource]="languagesDataSource"
    [showBorders]="true"
    [columnAutoWidth]="true"
    [showRowLines]="true"
    [showColumnLines]="true"
    [rowAlternationEnabled]="true"
    [focusedRowEnabled]="true"
    [(focusedRowIndex)]="languageFocusedRowIndex"
    (onFocusedRowChanging)="onLanguageFocusedRowChanging($event)"
    (onRowDblClick)="onLanguageRowDblClick($event)"
    >
    <dxi-column dataField="flag" caption="Icon" cellTemplate="cellTemplate"></dxi-column>
    <dxi-column dataField="languageId" caption="Id"></dxi-column>
    <dxi-column dataField="description" caption="Language"></dxi-column>
    <dxi-column dataField="selected" caption="Selected"></dxi-column>

    <div *dxTemplate="let data of 'cellTemplate'">
      <img
        [src]="data.value"
        />
      </div>
    </dx-data-grid>
  </dx-popup>